<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEIC Part 2 æ¨¡æ“¬è©¦é¨“</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 6px;
            border-radius: 3px;
            margin-top: 20px;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .content {
            padding: 40px;
        }

        .start-screen {
            text-align: center;
        }

        .start-screen h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .start-screen p {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .question-container {
            display: none;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .question-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }

        .timer {
            font-size: 1.2em;
            font-weight: bold;
            color: #e74c3c;
        }

        .audio-controls {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .audio-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .audio-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }

        .audio-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .options {
            margin: 30px 0;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px 20px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option-label {
            font-weight: bold;
            margin-right: 15px;
            min-width: 30px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }

        .results-screen {
            display: none;
            text-align: center;
        }

        .score-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .score-display h2 {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .score-display p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .review-container {
            text-align: left;
            margin-top: 30px;
        }

        .review-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }

        .review-item.correct {
            border-left-color: #28a745;
        }

        .review-item.incorrect {
            border-left-color: #dc3545;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .navigation {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>TOEIC Part 2 æ¨¡æ“¬è©¦é¨“</h1>
            <p>50å•ã®å¿œç­”å•é¡Œã§è‹±èªåŠ›ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã—ã‚‡ã†</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="content">
            <!-- é–‹å§‹ç”»é¢ -->
            <div class="start-screen" id="startScreen">
                <h2>TOEIC Part 2 å¿œç­”å•é¡Œ</h2>
                <p>
                    ã“ã®æ¨¡æ“¬è©¦é¨“ã§ã¯ã€50å•ã®å¿œç­”å•é¡Œã‚’è§£ãã¾ã™ã€‚<br>
                    å„å•é¡Œã§çŸ­ã„è³ªå•ã‚„æ–‡ãŒèª­ã¾ã‚Œã€ãã‚Œã«å¯¾ã™ã‚‹æœ€é©ãªå¿œç­”ã‚’3ã¤ã®é¸æŠè‚¢ã‹ã‚‰é¸ã‚“ã§ãã ã•ã„ã€‚<br>
                    éŸ³å£°ã¯å„å•é¡Œã«ã¤ã2å›ã¾ã§å†ç”Ÿã§ãã¾ã™ã€‚<br><br>
                    åˆ¶é™æ™‚é–“ã¯ç´„25åˆ†ã§ã™ã€‚æº–å‚™ãŒã§ããŸã‚‰é–‹å§‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚
                </p>
                <button class="btn" onclick="startTest()">è©¦é¨“é–‹å§‹</button>
            </div>

            <!-- å•é¡Œç”»é¢ -->
            <div class="question-container" id="questionContainer">
                <div class="question-header">
                    <div class="question-number" id="questionNumber">å•é¡Œ 1 / 50</div>
                    <div class="timer" id="timer">25:00</div>
                </div>

                <div class="audio-controls">
                    <p style="margin-bottom: 15px; color: #666;">éŸ³å£°ã‚’å†ç”Ÿã—ã¦å•é¡Œã‚’èã„ã¦ãã ã•ã„</p>
                    <button class="audio-btn" id="playBtn" onclick="playAudio()">ğŸ”Š éŸ³å£°å†ç”Ÿ</button>
                    <button class="audio-btn" id="replayBtn" onclick="replayAudio()" disabled>ğŸ”„ ã‚‚ã†ä¸€åº¦</button>
                    <div style="margin-top: 10px; color: #888; font-size: 0.9em;">
                        <span id="playCount">å†ç”Ÿå›æ•°: 0/2</span>
                    </div>
                </div>

                <div class="options" id="optionsContainer">
                    <div class="option" onclick="selectOption(0)">
                        <span class="option-label">(A)</span>
                        <span id="optionA">é¸æŠè‚¢A</span>
                    </div>
                    <div class="option" onclick="selectOption(1)">
                        <span class="option-label">(B)</span>
                        <span id="optionB">é¸æŠè‚¢B</span>
                    </div>
                    <div class="option" onclick="selectOption(2)">
                        <span class="option-label">(C)</span>
                        <span id="optionC">é¸æŠè‚¢C</span>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn" id="prevBtn" onclick="previousQuestion()" disabled>â† å‰ã®å•é¡Œ</button>
                    <button class="btn" id="nextBtn" onclick="nextQuestion()" disabled>æ¬¡ã®å•é¡Œ â†’</button>
                    <button class="btn" id="finishBtn" onclick="finishTest()" style="display: none;">è©¦é¨“çµ‚äº†</button>
                </div>
            </div>

            <!-- çµæœç”»é¢ -->
            <div class="results-screen" id="resultsScreen">
                <h2 style="margin-bottom: 20px; color: #333;">è©¦é¨“çµæœ</h2>
                <div class="score-display">
                    <h2 id="finalScore">0</h2>
                    <p>50å•ä¸­<span id="correctCount">0</span>å•æ­£è§£</p>
                    <p>æ­£ç­”ç‡: <span id="accuracy">0</span>%</p>
                </div>
                <div class="review-container" id="reviewContainer">
                    <!-- ãƒ¬ãƒ“ãƒ¥ãƒ¼é …ç›®ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
                </div>
                <button class="btn" onclick="restartTest()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
            </div>
        </div>
    </div>

    <script>
        // å•é¡Œãƒ‡ãƒ¼ã‚¿
        const questions = [
            {
                question: "Where is the nearest subway station?",
                options: ["It's about two blocks away.", "I prefer taking the bus.", "The train is running late."],
                correct: 0,
                explanation: "å ´æ‰€ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å ´æ‰€ã‚’ç­”ãˆã‚‹é¸æŠè‚¢ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "Would you like some coffee?",
                options: ["Yes, I'd love some.", "Coffee is expensive.", "The meeting is at 3 PM."],
                correct: 0,
                explanation: "ææ¡ˆã«å¯¾ã—ã¦ã¯å—ã‘å…¥ã‚Œã‚‹ã‹æ–­ã‚‹ã‹ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "How was your vacation?",
                options: ["Next week is fine.", "It was wonderful, thank you.", "I'm going to Hawaii."],
                correct: 1,
                explanation: "éå»ã®çµŒé¨“ã«ã¤ã„ã¦å°‹ã­ã‚‰ã‚ŒãŸã‚‰ã€ãã®çµŒé¨“ã«ã¤ã„ã¦ã®æ„Ÿæƒ³ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Who is giving the presentation today?",
                options: ["The presentation is at 2 PM.", "Mr. Johnson from marketing.", "In the conference room."],
                correct: 1,
                explanation: "ã€Œèª°ãŒã€ã¨å°‹ã­ã‚‰ã‚ŒãŸã‚‰äººã‚’ç­”ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"
            },
            {
                question: "Can you help me with this report?",
                options: ["The report is due tomorrow.", "Of course, I'd be happy to help.", "Reports are important."],
                correct: 1,
                explanation: "æ‰‹ä¼ã„ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸã‚‰ã€æ‰¿è«¾ã™ã‚‹ã‹æ–­ã‚‹ã‹ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "Why are you working late tonight?",
                options: ["I have a deadline to meet.", "Tonight's weather is nice.", "Working is important."],
                correct: 0,
                explanation: "ç†ç”±ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯ç†ç”±ã‚’ç­”ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"
            },
            {
                question: "Did you receive my email yesterday?",
                options: ["Email is convenient.", "Yes, I got it this morning.", "Yesterday was busy."],
                correct: 1,
                explanation: "Yes/Noè³ªå•ã«ã¯Yesã‹Noã§å§‹ã¾ã‚‹ç­”ãˆãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "What time does the store close?",
                options: ["At 9 PM on weekdays.", "The store sells clothes.", "I like shopping there."],
                correct: 0,
                explanation: "æ™‚é–“ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯æ™‚é–“ã‚’ç­”ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"
            },
            {
                question: "Are you attending the conference next week?",
                options: ["Conferences are educational.", "Yes, I've already registered.", "Next week is busy."],
                correct: 1,
                explanation: "å‚åŠ ã™ã‚‹ã‹ã©ã†ã‹ã®è³ªå•ã«ã¯Yes/Noã§å§‹ã¾ã‚‹è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "How long have you been working here?",
                options: ["About three years now.", "I enjoy working here.", "The office is downtown."],
                correct: 0,
                explanation: "æœŸé–“ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯æœŸé–“ã‚’ç­”ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"
            },
            {
                question: "Would you mind if I opened the window?",
                options: ["Windows are important.", "Not at all, go ahead.", "The weather is nice."],
                correct: 1,
                explanation: "è¨±å¯ã‚’æ±‚ã‚ã‚‹ä¸å¯§ãªè¡¨ç¾ã«ã¯æ‰¿è«¾ã‹æ‹’å¦ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "What's your favorite restaurant in town?",
                options: ["I love Italian food.", "There's a great Italian place on Main Street.", "Restaurants are expensive."],
                correct: 1,
                explanation: "å…·ä½“çš„ãªå ´æ‰€ã‚’å°‹ã­ã‚‰ã‚ŒãŸã‚‰å…·ä½“çš„ãªç­”ãˆãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "Have you finished the project yet?",
                options: ["Projects are challenging.", "Almost, I just need one more day.", "I started yesterday."],
                correct: 1,
                explanation: "å®Œäº†ã—ãŸã‹ã©ã†ã‹ã®è³ªå•ã«ã¯é€²æ—çŠ¶æ³ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Could you pick me up at the airport?",
                options: ["The airport is crowded.", "Sure, what time does your flight arrive?", "Flying is convenient."],
                correct: 1,
                explanation: "ä¾é ¼ã«å¯¾ã—ã¦ã¯æ‰¿è«¾ã—ã¦è©³ç´°ã‚’ç¢ºèªã™ã‚‹ã®ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "When is the deadline for this assignment?",
                options: ["Next Friday at 5 PM.", "Assignments are important.", "I'm working on it now."],
                correct: 0,
                explanation: "ã„ã¤ã‹ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªæ—¥æ™‚ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Do you know where Sarah went?",
                options: ["Sarah is my colleague.", "She went to the client meeting.", "I don't know Sarah well."],
                correct: 1,
                explanation: "å ´æ‰€ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å ´æ‰€ã‚„è¡Œå‹•ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "How much does this cost?",
                options: ["It's $29.99.", "It's very popular.", "I bought it yesterday."],
                correct: 0,
                explanation: "ä¾¡æ ¼ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªä¾¡æ ¼ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Are you free for lunch tomorrow?",
                options: ["Lunch is important.", "I'm sorry, I have a meeting.", "Tomorrow is Wednesday."],
                correct: 1,
                explanation: "èª˜ã„ã«å¯¾ã—ã¦ã¯æ‰¿è«¾ã™ã‚‹ã‹ç†ç”±ä»˜ãã§æ–­ã‚‹ã‹ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "Which floor is the accounting department on?",
                options: ["On the fifth floor.", "Accounting is important.", "The elevator is broken."],
                correct: 0,
                explanation: "ã©ã®éšã‹ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯éšæ•°ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Should we take the train or drive?",
                options: ["Transportation is important.", "Let's take the train, it's faster.", "I have a car."],
                correct: 1,
                explanation: "é¸æŠè‚¢ã‚’æç¤ºã•ã‚ŒãŸã‚‰ã©ã¡ã‚‰ã‹ã‚’é¸ã‚“ã§ç†ç”±ã‚’è¿°ã¹ã¾ã™ã€‚"
            },
            {
                question: "Is the printer working properly?",
                options: ["No, it's out of toner.", "Printers are useful.", "I need to print something."],
                correct: 0,
                explanation: "æ©Ÿæ¢°ã®çŠ¶æ…‹ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯çŠ¶æ…‹ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "What did you think of the movie?",
                options: ["Movies are entertaining.", "It was really exciting.", "I went last night."],
                correct: 1,
                explanation: "æ„Ÿæƒ³ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸã‚‰å…·ä½“çš„ãªæ„Ÿæƒ³ã‚’è¿°ã¹ã¾ã™ã€‚"
            },
            {
                question: "Can I borrow your pen for a moment?",
                options: ["Pens are useful.", "Of course, here you go.", "I have many pens."],
                correct: 1,
                explanation: "å€Ÿç”¨ã®ä¾é ¼ã«ã¯æ‰¿è«¾ã™ã‚‹ã‹æ–­ã‚‹ã‹ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "How often do you exercise?",
                options: ["Exercise is healthy.", "About three times a week.", "I joined a gym."],
                correct: 1,
                explanation: "é »åº¦ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯é »åº¦ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Where did you buy that jacket?",
                options: ["At the mall downtown.", "It was expensive.", "I like this color."],
                correct: 0,
                explanation: "ã©ã“ã§è²·ã£ãŸã‹ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å ´æ‰€ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Would you like to join our team for lunch?",
                options: ["Teams are important.", "That sounds great, thank you.", "Lunch is at noon."],
                correct: 1,
                explanation: "èª˜ã„ã«å¯¾ã—ã¦ã¯æ‰¿è«¾ã™ã‚‹ã‹æ–­ã‚‹ã‹ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "How's the weather today?",
                options: ["It's sunny and warm.", "Weather affects mood.", "I checked the forecast."],
                correct: 0,
                explanation: "å¤©æ°—ã«ã¤ã„ã¦å°‹ã­ã‚‰ã‚ŒãŸã‚‰ç¾åœ¨ã®å¤©æ°—çŠ¶æ³ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Do you have any plans for the weekend?",
                options: ["Weekends are relaxing.", "Yes, I'm visiting my family.", "Plans are important."],
                correct: 1,
                explanation: "é€±æœ«ã®äºˆå®šã‚’å°‹ã­ã‚‰ã‚ŒãŸã‚‰å…·ä½“çš„ãªäºˆå®šã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Could you turn down the music, please?",
                options: ["Music is enjoyable.", "Sure, no problem.", "I like this song."],
                correct: 1,
                explanation: "ä¸å¯§ãªä¾é ¼ã«ã¯æ‰¿è«¾ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "What's your phone number?",
                options: ["Phones are useful.", "It's 555-1234.", "I got a new phone."],
                correct: 1,
                explanation: "é›»è©±ç•ªå·ã‚’å°‹ã­ã‚‰ã‚ŒãŸã‚‰ç•ªå·ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Are you enjoying your new job?",
                options: ["Jobs are important.", "Yes, it's very challenging.", "I started last month."],
                correct: 1,
                explanation: "ä»•äº‹ã«ã¤ã„ã¦ã®æ„Ÿæƒ³ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸã‚‰æ„Ÿæƒ³ã‚’è¿°ã¹ã¾ã™ã€‚"
            },
            {
                question: "Which way is the library?",
                options: ["Go straight and turn left.", "Libraries have many books.", "I need to return a book."],
                correct: 0,
                explanation: "é“é †ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯æ–¹å‘ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Have you seen Tom today?",
                options: ["Tom is my friend.", "No, I haven't seen him.", "Today is busy."],
                correct: 1,
                explanation: "è¦‹ãŸã‹ã©ã†ã‹ã®è³ªå•ã«ã¯Yes/Noã§å§‹ã¾ã‚‹è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "What time is your appointment?",
                options: ["At 3:30 this afternoon.", "Appointments are important.", "I made it yesterday."],
                correct: 0,
                explanation: "æ™‚é–“ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªæ™‚é–“ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Do you mind if I sit here?",
                options: ["Sitting is comfortable.", "Not at all, please do.", "The chair is empty."],
                correct: 1,
                explanation: "è¨±å¯ã‚’æ±‚ã‚ã‚‹è³ªå•ã«ã¯æ‰¿è«¾ã‹æ‹’å¦ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "How was your flight?",
                options: ["Flights can be tiring.", "It was delayed, but comfortable.", "I flew yesterday."],
                correct: 1,
                explanation: "ãƒ•ãƒ©ã‚¤ãƒˆã®æ„Ÿæƒ³ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸã‚‰ä½“é¨“ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "What's for dinner tonight?",
                options: ["We're having pasta.", "Dinner is important.", "I'm hungry."],
                correct: 0,
                explanation: "ä½•ã‚’é£Ÿã¹ã‚‹ã‹ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªæ–™ç†ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Are you coming to the party on Saturday?",
                options: ["Parties are fun.", "I'd love to, but I can't make it.", "Saturday is weekend."],
                correct: 1,
                explanation: "å‚åŠ ã™ã‚‹ã‹ã©ã†ã‹ã®è³ªå•ã«ã¯æ‰¿è«¾ã™ã‚‹ã‹æ–­ã‚‹ã‹ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "How do you get to work?",
                options: ["Work is important.", "I usually take the subway.", "I work downtown."],
                correct: 1,
                explanation: "é€šå‹¤æ–¹æ³•ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯äº¤é€šæ‰‹æ®µã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Is this seat taken?",
                options: ["Seats are comfortable.", "No, you can sit there.", "I'm sitting here."],
                correct: 1,
                explanation: "å¸­ãŒç©ºã„ã¦ã„ã‚‹ã‹ã®è³ªå•ã«ã¯Yes/Noã§å§‹ã¾ã‚‹è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "What's your favorite color?",
                options: ["Colors are beautiful.", "I really like blue.", "I wear different colors."],
                correct: 1,
                explanation: "å¥½ã¿ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªå¥½ã¿ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Could you help me move this table?",
                options: ["Tables are heavy.", "Sure, let me give you a hand.", "Moving is difficult."],
                correct: 1,
                explanation: "æ‰‹ä¼ã„ã®ä¾é ¼ã«ã¯æ‰¿è«¾ã™ã‚‹ã‹æ–­ã‚‹ã‹ã®è¿”ç­”ãŒé©åˆ‡ã§ã™ã€‚"
            },
            {
                question: "When will the report be ready?",
                options: ["By the end of the week.", "Reports take time.", "I'm working on it."],
                correct: 0,
                explanation: "ã„ã¤å®Œæˆã™ã‚‹ã‹ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªæ™‚æœŸã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Do you speak Spanish?",
                options: ["Spanish is useful.", "A little, but not fluently.", "I studied languages."],
                correct: 1,
                explanation: "è¨€èªèƒ½åŠ›ã«ã¤ã„ã¦å°‹ã­ã‚‰ã‚ŒãŸã‚‰èƒ½åŠ›ãƒ¬ãƒ™ãƒ«ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Where should we meet for lunch?",
                options: ["How about that new cafÃ© on 5th Street?", "Lunch meetings are common.", "I'm hungry now."],
                correct: 0,
                explanation: "å¾…ã¡åˆã‚ã›å ´æ‰€ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªå ´æ‰€ã‚’ææ¡ˆã—ã¾ã™ã€‚"
            },
            {
                question: "Have you finished reading the book?",
                options: ["Books are educational.", "Almost, just a few more chapters.", "I bought it last week."],
                correct: 1,
                explanation: "èª­ã¿çµ‚ã‚ã£ãŸã‹ã®è³ªå•ã«ã¯é€²æ—çŠ¶æ³ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "What's the password for the Wi-Fi?",
                options: ["Wi-Fi is convenient.", "It's 'office2024'.", "I use Wi-Fi daily."],
                correct: 1,
                explanation: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Are you planning to attend the training session?",
                options: ["Training is valuable.", "Yes, I think it will be helpful.", "Sessions are scheduled regularly."],
                correct: 1,
                explanation: "å‚åŠ äºˆå®šã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å‚åŠ ã™ã‚‹ã‹ã©ã†ã‹ã¨ãã®ç†ç”±ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "How long does it take to get there?",
                options: ["About 30 minutes by car.", "Getting there is easy.", "I went there yesterday."],
                correct: 0,
                explanation: "æ‰€è¦æ™‚é–“ã‚’å°‹ã­ã‚‹è³ªå•ã«ã¯å…·ä½“çš„ãªæ™‚é–“ã‚’ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Would you prefer tea or coffee?",
                options: ["Beverages are refreshing.", "Coffee, please.", "I drink both sometimes."],
                correct: 1,
                explanation: "é¸æŠè‚¢ã‚’æç¤ºã•ã‚ŒãŸã‚‰ã©ã¡ã‚‰ã‹ã‚’é¸ã‚“ã§ç­”ãˆã¾ã™ã€‚"
            },
            {
                question: "Is the meeting still scheduled for 2 PM?",
                options: ["Meetings are important.", "Yes, but it's been moved to room 301.", "I have my calendar ready."],
                correct: 1,
                explanation: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç¢ºèªã®è³ªå•ã«ã¯ç¢ºèªã¨ã¨ã‚‚ã«å¤‰æ›´ãŒã‚ã‚Œã°è©³ç´°ã‚’ä¼ãˆã¾ã™ã€‚"
            }
        ];

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentQuestion = 0;
        let selectedAnswers = new Array(50).fill(-1);
        let timeRemaining = 25 * 60; // 25åˆ†
        let timer;
        let playCount = 0;
        let currentAudio = null;

        // è©¦é¨“é–‹å§‹
        function startTest() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('questionContainer').style.display = 'block';
            startTimer();
            showQuestion();
        }

        // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
        function startTimer() {
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    finishTest();
                }
            }, 1000);
        }

        // ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºæ›´æ–°
        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        // å•é¡Œè¡¨ç¤º
        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `å•é¡Œ ${currentQuestion + 1} / 50`;
            document.getElementById('optionA').textContent = question.options[0];
            document.getElementById('optionB').textContent = question.options[1];
            document.getElementById('optionC').textContent = question.options[2];
            
            // é€²æ—ãƒãƒ¼æ›´æ–°
            const progress = ((currentQuestion + 1) / 50) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            
            // é¸æŠè‚¢ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
            resetOptions();
            
            // å‰å›ã®é¸æŠã‚’å¾©å…ƒ
            if (selectedAnswers[currentQuestion] !== -1) {
                selectOption(selectedAnswers[currentQuestion], false);
            }
            
            // éŸ³å£°å†ç”Ÿå›æ•°ã‚’ãƒªã‚»ãƒƒãƒˆ
            playCount = 0;
            updatePlayCount();
            
            // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
            updateNavigationButtons();
        }

        // é¸æŠè‚¢ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
        function resetOptions() {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
        }

        // é¸æŠè‚¢é¸æŠ
        function selectOption(index, playSound = true) {
            resetOptions();
            document.querySelectorAll('.option')[index].classList.add('selected');
            selectedAnswers[currentQuestion] = index;
            updateNavigationButtons();
            
            if (playSound) {
                // é¸æŠéŸ³ã‚’å†ç”Ÿï¼ˆå®Ÿéš›ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆï¼‰
                // playSelectionSound();
            }
        }

        // éŸ³å£°å†ç”Ÿï¼ˆæ¨¡æ“¬ï¼‰
        function playAudio() {
            if (playCount >= 2) return;
            
            playCount++;
            updatePlayCount();
            
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†ç”Ÿ
            // ã“ã“ã§ã¯ Text-to-Speech API ã‚’ä½¿ç”¨ã—ã¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            const question = questions[currentQuestion].question;
            
            if ('speechSynthesis' in window) {
                // æ—¢å­˜ã®éŸ³å£°ã‚’åœæ­¢
                window.speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(question);
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                utterance.pitch = 1;
                
                utterance.onstart = () => {
                    document.getElementById('playBtn').disabled = true;
                    document.getElementById('replayBtn').disabled = true;
                };
                
                utterance.onend = () => {
                    document.getElementById('playBtn').disabled = false;
                    if (playCount < 2) {
                        document.getElementById('replayBtn').disabled = false;
                    }
                };
                
                window.speechSynthesis.speak(utterance);
            } else {
                alert('éŸ³å£°å†ç”Ÿæ©Ÿèƒ½ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
            }
        }

        // éŸ³å£°å†ç”Ÿï¼ˆå†ç”Ÿï¼‰
        function replayAudio() {
            playAudio();
        }

        // å†ç”Ÿå›æ•°è¡¨ç¤ºæ›´æ–°
        function updatePlayCount() {
            document.getElementById('playCount').textContent = `å†ç”Ÿå›æ•°: ${playCount}/2`;
            if (playCount >= 2) {
                document.getElementById('playBtn').disabled = true;
                document.getElementById('replayBtn').disabled = true;
            }
        }

        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³æ›´æ–°
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const finishBtn = document.getElementById('finishBtn');
            
            prevBtn.disabled = currentQuestion === 0;
            
            if (currentQuestion === 49) {
                nextBtn.style.display = 'none';
                finishBtn.style.display = 'inline-block';
                finishBtn.disabled = selectedAnswers[currentQuestion] === -1;
            } else {
                nextBtn.style.display = 'inline-block';
                finishBtn.style.display = 'none';
                nextBtn.disabled = selectedAnswers[currentQuestion] === -1;
            }
        }

        // æ¬¡ã®å•é¡Œ
        function nextQuestion() {
            if (currentQuestion < 49 && selectedAnswers[currentQuestion] !== -1) {
                currentQuestion++;
                showQuestion();
            }
        }

        // å‰ã®å•é¡Œ
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // è©¦é¨“çµ‚äº†
        function finishTest() {
            clearInterval(timer);
            window.speechSynthesis.cancel(); // éŸ³å£°ã‚’åœæ­¢
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'block';
            showResults();
        }

        // çµæœè¡¨ç¤º
        function showResults() {
            let correctCount = 0;
            
            for (let i = 0; i < 50; i++) {
                if (selectedAnswers[i] === questions[i].correct) {
                    correctCount++;
                }
            }
            
            const accuracy = Math.round((correctCount / 50) * 100);
            
            document.getElementById('finalScore').textContent = correctCount;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('accuracy').textContent = accuracy;
            
            // ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç”Ÿæˆ
            generateReview();
        }

        // ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆ
        function generateReview() {
            const reviewContainer = document.getElementById('reviewContainer');
            reviewContainer.innerHTML = '<h3 style="margin-bottom: 20px; color: #333;">å•é¡Œåˆ¥è©³ç´°çµæœ</h3>';
            
            for (let i = 0; i < 50; i++) {
                const question = questions[i];
                const userAnswer = selectedAnswers[i];
                const isCorrect = userAnswer === question.correct;
                
                const reviewItem = document.createElement('div');
                reviewItem.className = `review-item ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const labels = ['(A)', '(B)', '(C)'];
                const userAnswerText = userAnswer === -1 ? 'æœªå›ç­”' : labels[userAnswer];
                const correctAnswerText = labels[question.correct];
                
                reviewItem.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <strong>å•é¡Œ ${i + 1}</strong>
                        <span style="color: ${isCorrect ? '#28a745' : '#dc3545'}; font-weight: bold;">
                            ${isCorrect ? 'âœ“ æ­£è§£' : 'âœ— ä¸æ­£è§£'}
                        </span>
                    </div>
                    <div style="margin-bottom: 8px;"><strong>å•é¡Œ:</strong> ${question.question}</div>
                    <div style="margin-bottom: 8px;"><strong>ã‚ãªãŸã®å›ç­”:</strong> ${userAnswerText}</div>
                    <div style="margin-bottom: 8px;"><strong>æ­£è§£:</strong> ${correctAnswerText}</div>
                    <div style="margin-bottom: 8px;"><strong>æ­£è§£ã®é¸æŠè‚¢:</strong> ${question.options[question.correct]}</div>
                    <div style="color: #666; font-size: 0.9em;"><strong>è§£èª¬:</strong> ${question.explanation}</div>
                `;
                
                reviewContainer.appendChild(reviewItem);
            }
        }

        // ãƒ†ã‚¹ãƒˆå†é–‹å§‹
        function restartTest() {
            currentQuestion = 0;
            selectedAnswers = new Array(50).fill(-1);
            timeRemaining = 25 * 60;
            playCount = 0;
            
            document.getElementById('resultsScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('progressFill').style.width = '0%';
            
            window.speechSynthesis.cancel();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        window.addEventListener('load', () => {
            // åˆæœŸçŠ¶æ…‹ã®è¨­å®š
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'none';
        });

        // ãƒšãƒ¼ã‚¸ã‚’é›¢ã‚Œã‚‹å‰ã®è­¦å‘Š
        window.addEventListener('beforeunload', (e) => {
            if (document.getElementById('questionContainer').style.display !== 'none') {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>